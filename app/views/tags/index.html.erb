<h1>Tags</h1>

<div id="wordcloud"></div>

<%= javascript_include_tag 'visualisation' %>
<script>
  Wordcloud.selector = '#wordcloud';
  Wordcloud.fill = d3.scale.ordinal().range(["#67001f","#b2182b","#d6604d","#f4a582","#92c5de","#4393c3","#2166ac","#053061"]); // modified RdBu[11]
  Wordcloud.width = 600;
  Wordcloud.height = 300;
  Wordcloud.words = <%= raw @tag_counts.map{|tag,count| {text: tag, size: count, href: tag_path(tag)}}.to_json %>;
  Wordcloud.init();
</script>

<noscript>
<ul>
<% @tag_counts.each do |tag,count| %>
	<li><%= link_to h(tag), tag_path(h(tag)) %> (<%=h count %>)</li>
<% end %>
</ul>
</noscript>
